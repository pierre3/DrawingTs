var __extends=this.__extends||function(n,t){function r(){this.constructor=n}for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);r.prototype=t.prototype;n.prototype=new r},DrawingTs;(function(n){"use strict";var t=function(){function n(n,t){this.x=n;this.y=t}return n.prototype.to=function(n){return new i(n.x-this.x,n.y-this.y)},n.prototype.scale=function(t){return new n(this.x*t,this.y*t)},n}(),i,u,r;n.Point=t;i=function(n){function t(t,i){n.call(this,t,i)}return __extends(t,n),t.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.add=function(n){return new t(this.x+n.x,this.y+n.y)},t.prototype.subtract=function(n){return new t(this.x-n.x,this.y-n.y)},t.prototype.multiple=function(n){return new t(n*this.x,n*this.y)},t.prototype.dotProduct=function(n){return this.x*n.x+this.y*n.y},t.prototype.crossProduct=function(n){return new t(this.x*n.y-n.x*this.y,this.y*n.x-n.y*this.x)},t}(t);n.Vector=i;u=function(){function n(n,t,i,r){this.x=n;this.y=t;this.w=i;this.h=r}return Object.defineProperty(n.prototype,"left",{get:function(){return this.x},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"right",{get:function(){return this.x+this.w},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"top",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"bottom",{get:function(){return this.y+this.h},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Position",{get:function(){return new t(this.x,this.y)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"Size",{get:function(){return new r(this.w,this.h)},enumerable:!0,configurable:!0}),n}();n.Rectangle=u;r=function(){function n(n,t){this.width=n;this.height=t}return n}();n.Size=r})(DrawingTs||(DrawingTs={})),function(n){"use strict";var t=function(){function n(n,t,i,r,u){typeof r=="undefined"&&(r=!1);typeof u=="undefined"&&(u=!1);this.canvas=n;this.position=t;this.source=i;this.isMultiTouch=r;this.needsPaint=u}return n}(),i;n.CanvasPointerEvent=t;i=function(){function i(t){if(this._zoomX=1,this._zoomY=1,this._htmlCanvas=document.getElementById(t),this._htmlCanvas==null)throw DOMException.NOT_FOUND_ERR;this.graphics=new n.Graphics(this._htmlCanvas.getContext("2d"));this._bufferWidth=this._htmlCanvas.width;this._bufferHeight=this._htmlCanvas.height}return Object.defineProperty(i.prototype,"bufferWidth",{get:function(){return this._bufferWidth},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferHeight",{get:function(){return this._bufferHeight},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zoomX",{get:function(){return this._zoomX},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"zoomY",{get:function(){return this._zoomY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"htmlCanvas",{get:function(){return this._htmlCanvas},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onPointerDown",{set:function(n){var t=this;n!=null&&("onpointerdown"in this._htmlCanvas?this._htmlCanvas.addEventListener("pointerdown",function(i){return n(t.createPointerEvent(i))}):"ontouchstart"in this._htmlCanvas?this._htmlCanvas.addEventListener("touchstart",function(i){return n(t.createPointerEventTouch(i))}):this._htmlCanvas.addEventListener("mousedown",function(i){return n(t.createPointerEvent(i))}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onPointerMove",{set:function(n){var t=this;n!=null&&("onpointermove"in this._htmlCanvas?this._htmlCanvas.addEventListener("pointermove",function(i){return n(t.createPointerEvent(i))}):"ontouchmove"in this._htmlCanvas?this._htmlCanvas.addEventListener("touchmove",function(i){return n(t.createPointerEventTouch(i))}):this._htmlCanvas.addEventListener("mousemove",function(i){return n(t.createPointerEvent(i))}))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onPointerUp",{set:function(n){var t=this;n!=null&&("onpointerup"in this._htmlCanvas?this._htmlCanvas.addEventListener("pointerup",function(i){return n(t.createPointerEvent(i))}):"ontouchend"in this._htmlCanvas?this._htmlCanvas.addEventListener("touchend",function(i){return n(t.createPointerEventTouchEnd(i))}):this._htmlCanvas.addEventListener("mouseup",function(i){return n(t.createPointerEvent(i))}))},enumerable:!0,configurable:!0}),i.prototype.setDisplaySize=function(n,t){this._htmlCanvas.style.width=n.toString()+"px";this._htmlCanvas.style.height=t.toString()+"px";this._zoomX=this._bufferWidth/n;this._zoomY=this._bufferHeight/t},i.prototype.zoom=function(n){var t=n/100;this.setDisplaySize(this.bufferWidth*t,this.bufferHeight*t)},i.prototype.paint=function(){if(this.onPaint!=null)this.onPaint(this.graphics)},i.prototype.getDataURL=function(n){return this._htmlCanvas.toDataURL(n)},i.prototype.adjustWidth=function(n,t){typeof t=="undefined"&&(t=!1);var i=t?Math.min(this.bufferWidth,n):n,r=this.bufferHeight*i/this.bufferWidth;this.setDisplaySize(i,r)},i.prototype.adjustHeight=function(n,t){typeof t=="undefined"&&(t=!1);var i=t?Math.min(this.bufferHeight,n):n,r=this.bufferWidth*i/this.bufferHeight;this.setDisplaySize(r,i)},i.prototype.createPointerEvent=function(i){var r=new n.Point(i.offsetX*this._zoomX,i.offsetY*this._zoomY);return new t(this,r,i)},i.prototype.createPointerEventTouch=function(i){var r=i.targetTouches.length>1,u=new n.Point(this._zoomX*(i.touches[0].pageX-this._htmlCanvas.offsetLeft),this._zoomY*(i.touches[0].pageY-this._htmlCanvas.offsetTop));return new t(this,u,i,r)},i.prototype.createPointerEventTouchEnd=function(i){return new t(this,new n.Point(0,0),i)},i}();n.Canvas=i}(DrawingTs||(DrawingTs={})),function(n){"use strict";var t=function(){function t(n){this.rc=n}return t.prototype.clear=function(t,i){t?this.rc.clearRect(0,0,this.rc.canvas.width,this.rc.canvas.height):this.fillRect(i,new n.Rectangle(0,0,this.rc.canvas.width,this.rc.canvas.height))},t.prototype.drawLine=function(n,t,i){this.rc.beginPath();n.applyTo(this);this.rc.moveTo(t.x,t.y);this.rc.lineTo(i.x,i.y);this.rc.stroke();this.rc.closePath()},t.prototype.drawPolyLine=function(n,t){if(t!=null&&!(t.length<2)){this.rc.beginPath();n.applyTo(this);this.rc.moveTo(t[0].x,t[0].y);for(var i=1;i<t.length;i++)this.rc.lineTo(t[i].x,t[i].y);this.rc.stroke();this.rc.closePath()}},t.prototype.drawPath=function(n,t){t==null||t.length<2||(this.rc.beginPath(),n.applyTo(this),t.draw(this),this.rc.stroke(),this.rc.closePath())},t.prototype.fillPath=function(n,t){t==null||t.length<2||(this.rc.beginPath(),n.applyTo(this),t.draw(this),this.rc.fill(),this.rc.closePath())},t.prototype.drawElipse=function(n,t){this.figureElipse(n,t,function(n){return n.rc.stroke()})},t.prototype.fillElipse=function(n,t){this.figureElipse(n,t,function(n){return n.rc.fill()})},t.prototype.drawRect=function(n,t){this.rc.beginPath();n.applyTo(this);this.rc.strokeRect(t.x,t.y,t.w,t.h);this.rc.closePath()},t.prototype.fillRect=function(n,t){this.rc.beginPath();n.applyTo(this);this.rc.fillRect(t.x,t.y,t.w,t.h);this.rc.closePath()},t.prototype.drawStringOutline=function(t,i,r,u,f,e,o){return typeof e=="undefined"&&(e=n.TextAlign.Start),typeof o=="undefined"&&(o=n.TextBaseline.Alphabetic),this.rc.beginPath(),r.applyTo(this),this.rc.textAlign=e.value,this.rc.textBaseline=o.value,this.rc.font=i.cssFont,this.rc.strokeText(t,u,f),this.rc.closePath(),this.rc.measureText(t).width},t.prototype.drawString=function(t,i,r,u,f,e,o){return typeof e=="undefined"&&(e=n.TextAlign.Start),typeof o=="undefined"&&(o=n.TextBaseline.Alphabetic),this.rc.beginPath(),r.applyTo(this),this.rc.textAlign=e.value,this.rc.textBaseline=o.value,this.rc.font=i.cssFont,this.rc.fillText(t,u,f),this.rc.closePath(),this.rc.measureText(t).width},t.prototype.drawImage=function(n,t,i,r,u){n.draw(this,t,i,r,u)},t.prototype.figureElipse=function(n,t,i){var f,r,u,e,o;t.w>t.h?(f=t.w/2,r=1,u=t.h/t.w):(f=t.h/2,r=t.w/t.h,u=1);e=t.x+t.w/2;o=t.y+t.h/2;this.rc.beginPath();this.rc.translate(e,o);this.rc.scale(r,u);this.rc.arc(0,0,f,0,Math.PI*2);this.rc.scale(1/r,1/u);this.rc.translate(-e,-o);n.applyTo(this);i(this);this.rc.closePath()},t}();n.Graphics=t}(DrawingTs||(DrawingTs={})),function(n){"use strict";var t=function(){function n(n){this.cssColor=n}return n.fromRgb=function(t,i,r){return new n("rgb("+t+","+i+","+r+")")},n.fromRgba=function(t,i,r,u){return new n("rgba("+t+","+i+","+r+","+u+")")},n.Black=new n("blak"),n.Silver=new n("silver"),n.Gray=new n("gray"),n.White=new n("white"),n.Maroon=new n("maroon"),n.Red=new n("red"),n.Purple=new n("purple"),n.Fuchsia=new n("fuchsia"),n.Green=new n("green"),n.Lime=new n("lime"),n.Olive=new n("olive"),n.Yellow=new n("yellow"),n.Navy=new n("navy"),n.Blue=new n("blue"),n.Teal=new n("teal"),n.Aqua=new n("aqua"),n}(),r,i,u,f,e,o,s;n.Color=t;r=function(){function t(n){this.cssFont=n}return t.Create=function(i,r,u){return typeof u=="undefined"&&(u=n.FontStyle.Normal),new t(u.value+" "+r+"px '"+i+"'")},t.prototype.applyTo=function(n){n.rc.font=this.cssFont},t}();n.Font=r;i=function(){function i(t,i,r,u,f,e){typeof i=="undefined"&&(i=1);typeof r=="undefined"&&(r=[]);typeof u=="undefined"&&(u=n.LineCap.Butt);typeof f=="undefined"&&(f=n.LineJoin.Bevel);typeof e=="undefined"&&(e=10);this.color=t;this.width=i;this.lineDash=r;this.lineCap=u;this.lineJoin=f;this.miterLimit=e}return i.prototype.applyTo=function(n){n.rc.strokeStyle=this.color.cssColor;n.rc.setLineDash!=undefined&&n.rc.setLineDash(this.lineDash);n.rc.lineWidth=this.width;n.rc.lineCap=this.lineCap.value;n.rc.lineJoin=this.lineJoin.value;n.rc.miterLimit=this.miterLimit},i.prototype.clone=function(){return new i(new t(this.color.cssColor),this.width,this.lineDash,this.lineCap,this.lineJoin,this.miterLimit)},i}();n.Pen=i;u=function(){function n(n){this.color=n}return n.prototype.applyTo=function(n){n.rc.fillStyle=this.color.cssColor},n}();n.SolidBrush=u;f=function(){function n(n,t){this.offset=n;this.color=t}return n}();n.GradientColor=f;e=function(){function n(n,t,i){this.pos0=n;this.pos1=t;this.colors=i}return n.prototype.applyTo=function(n){var t=n.rc.createLinearGradient(this.pos0.x,this.pos0.y,this.pos1.x,this.pos1.y);this.colors.forEach(function(n){return t.addColorStop(n.offset,n.color.cssColor)});n.rc.fillStyle=t},n}();n.LinearGradientBrush=e;o=function(){function n(n,t,i,r,u){this.center0=n;this.r0=t;this.center1=i;this.r1=r;this.colors=u}return n.prototype.applyTo=function(n){var t=n.rc.createRadialGradient(this.center0.x,this.center0.y,this.r0,this.center1.x,this.center1.y,this.r1);this.colors.forEach(function(n){return t.addColorStop(n.offset,n.color.cssColor)});n.rc.fillStyle=t},n}();n.RadialGradientBrush=o;s=function(){function r(r,u){this.imageElement=new Image(r,u);this.drawImageWhenIncomplete=function(r,u){r.drawRect(new i(t.Blue),u);r.drawLine(new i(t.Red),u.Position,new n.Point(u.right,u.bottom));r.drawLine(new i(t.Red),new n.Point(u.right,u.top),new n.Point(u.left,u.bottom))}}return Object.defineProperty(r.prototype,"bounds",{get:function(){return new n.Rectangle(0,0,this.imageElement.width,this.imageElement.height)},enumerable:!0,configurable:!0}),r.prototype.load=function(n,t){this.imageElement.onload=t;this.imageElement.src=n},r.prototype.draw=function(t,i,r,u,f){var a=u==null?0:u.x,v=u==null?0:u.y,s=f==null?this.imageElement.width:f.width,h=f==null?this.imageElement.height:f.height,c=i==null?0:i.x,l=i==null?0:i.y,e=r==null?s:r.width,o=r==null?h:r.height;this.imageElement.complete?this.drawImage(t,a,v,s,h,c,l,e,o):(e===0&&(e=32),o===0&&(o=32),this.drawImageWhenIncomplete(t,new n.Rectangle(c,l,e,o)))},r.prototype.drawImage=function(n,t,i,r,u,f,e,o,s){n.rc.drawImage(this.imageElement,t,i,r,u,f,e,o,s)},r}();n.ImageObject=s}(DrawingTs||(DrawingTs={})),function(n){"use strict";var e=function(){function n(n){this.position=n}return n.prototype.draw=function(n){n.rc.moveTo(this.position.x,this.position.y)},n}(),t,i,r,u,f,o;n.MoveToPathData=e;t=function(){function n(n){this.position=n}return n.prototype.draw=function(n){n.rc.lineTo(this.position.x,this.position.y)},n}();n.LineToPathData=t;i=function(){function n(n,t,i){this.ctrlPoint0=n;this.ctrlPoint1=t;this.position=i}return n.prototype.draw=function(n){n.rc.bezierCurveTo(this.ctrlPoint0.x,this.ctrlPoint0.y,this.ctrlPoint1.x,this.ctrlPoint1.y,this.position.x,this.position.y)},n}();n.BezierCurveToPathData=i;r=function(){function n(n,t){this.ctrlPoint=n;this.position=t}return n.prototype.draw=function(n){n.rc.quadraticCurveTo(this.ctrlPoint.x,this.ctrlPoint.y,this.position.x,this.position.y)},n}();n.QuadraticCurveToPathData=r;u=function(){function n(n,t,i){this.ctrlPoint=n;this.position=t;this.radius=i}return n.prototype.draw=function(n){n.rc.arcTo(this.ctrlPoint.x,this.ctrlPoint.y,this.position.x,this.position.y,this.radius)},n}();n.ArcToPathData=u;f=function(){function n(){this.position=null}return n.prototype.draw=function(n){n.rc.closePath()},n}();n.ClosePathData=f;o=function(){function n(){this.items=[]}return Object.defineProperty(n.prototype,"length",{get:function(){return this.items.length},enumerable:!0,configurable:!0}),n.prototype.moveTo=function(n){return this.items.push(new e(n)),this},n.prototype.lineTo=function(n){return this.items.push(new t(n)),this},n.prototype.bezierCurveTo=function(n,t,r){return this.items.push(new i(n,t,r)),this},n.prototype.quadraticCurveTo=function(n,t){return this.items.push(new r(n,t)),this},n.prototype.arcTo=function(n,t,i){return this.items.push(new u(n,t,i)),this},n.prototype.closePath=function(){return this.items.push(new f),this},n.prototype.draw=function(n){this.items.forEach(function(t){t.draw(n)})},n.prototype.push=function(n){this.items.push(n)},n.prototype.clone=function(){var t=new n;return t.items=this.items.slice(),t},n}();n.Path=o}(DrawingTs||(DrawingTs={})),function(n){"use strict";var r=function(){function i(){this.shapes=[];this.backgroundColor=new n.Color("white");this.bkTransparent=!1;this.isMouseOn=!1}return i.prototype.createEraser=function(n,i){var u=this,r=new t(n,i);return r.onErase=function(n,t){u.shapes.forEach(function(i){i.erase(n,t)})},r},i.prototype.onPointerDown=function(n){this.currentItem.contact(n.position);this.isMouseOn=!0},i.prototype.onPointerMove=function(n){this.isMouseOn!=!1&&(n.needsPaint=this.currentItem.drag(n.position))},i.prototype.onPointerUp=function(n){this.isMouseOn=!1;var t=this.currentItem.drop(n.position);t!=null&&this.shapes.push(t)},i.prototype.onPaint=function(t){t.clear(this.bkTransparent,new n.SolidBrush(this.backgroundColor));this.shapes.forEach(function(n){return n.draw(t)});this.currentItem.draw(t)},i.prototype.undo=function(){this.shapes.pop()},i}(),i,t;n.DrawingManager=r;i=function(){function t(t){this.pen=t;this.path=new n.Path}return t.prototype.contact=function(n){this.path.moveTo(n);this.prev=n},t.prototype.drag=function(n){if(this.prev!=null)return this.prev.to(n).norm()<2?!1:(this.path.lineTo(n),this.prev=n,!0)},t.prototype.drop=function(){var t=this.clone();return this.path=new n.Path,this.prev=null,t},t.prototype.draw=function(n){n.drawPath(this.pen,this.path)},t.prototype.erase=function(t,i){var r=new n.Path,u=!0;this.path.items.forEach(function(n){t.to(n.position).norm()<=i?u=!0:u==!0?(r.moveTo(n.position),u=!1):r.push(n)},this);this.path=r},t.prototype.clone=function(){var n=new t(this.pen);return n.path=this.path.clone(),n},t}();n.Pencil=i;t=function(){function t(n,t){this.pen=n;this.radius=t}return t.prototype.contact=function(n){if(this.center=n,this.onErase!=null)this.onErase(this.center,this.radius)},t.prototype.drag=function(n){if(this.center=n,this.onErase!=null){this.onErase(this.center,this.radius);return!0}return!1},t.prototype.drop=function(){return this.center=null,null},t.prototype.draw=function(t){if(this.center!=null){var i=new n.Rectangle(this.center.x-this.radius,this.center.y-this.radius,this.radius*2,this.radius*2);t.drawElipse(this.pen,i)}},t.prototype.erase=function(){return[]},t}();n.Eraser=t}(DrawingTs||(DrawingTs={})),function(n){var t=function(){function n(n,t){this._index=n;this._value=t}return Object.defineProperty(n.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),n}(),i,r,u,f,e;n.EnumBase=t;i=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.Normal=new t(0,""),t.Bold=new t(1,"bold"),t.Italic=new t(2,"italic"),t.ItalicBold=new t(3,"italic bold"),t}(t);n.FontStyle=i;r=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.Top=new t(0,"top"),t.Hanging=new t(1,"hanging"),t.Middle=new t(2,"middle"),t.Alphabetic=new t(3,"alphabetic"),t.Ideographic=new t(4,"ideographic"),t.Bottom=new t(5,"bottom"),t}(t);n.TextBaseline=r;u=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.Start=new t(0,"start"),t.End=new t(1,"end"),t.Left=new t(2,"left"),t.Right=new t(3,"right"),t.Center=new t(4,"center"),t}(t);n.TextAlign=u;f=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.Butt=new t(0,"butt"),t.Round=new t(1,"round"),t.Square=new t(2,"square"),t}(t);n.LineCap=f;e=function(n){function t(){n.apply(this,arguments)}return __extends(t,n),t.Bevel=new t(0,"bevel"),t.Round=new t(1,"round"),t.Miter=new t(2,"miter"),t}(t);n.LineJoin=e}(DrawingTs||(DrawingTs={})),function(){"use strict"}(DrawingTs||(DrawingTs={}));
//# sourceMappingURL=drawingTs.min.js.map
